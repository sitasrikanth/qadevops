
FROM maven:3.9.0-eclipse-temurin-17 AS build

WORKDIR /app

RUN git clone https://github.com/sitasrikanth/sita-devops.git sita-devops

WORKDIR /app/sita-devops/docker-tomcat-app

RUN git checkout sitasrikanth/practise-basic-docker


RUN mvn clean install


FROM tomcat:latest
COPY --from=build /app/sita-devops/docker-tomcat-app/target/app.war /usr/local/tomcat/webapps
EXPOSE 8080
CMD ["catalina.sh", "run"]

